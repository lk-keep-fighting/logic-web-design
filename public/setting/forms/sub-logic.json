{"type":"page","body":[{"type":"form","id":"u:8f6dc62b29e2","title":"节点配置","body":[{"type":"input-text","id":"u:30db4470577d","label":"名称","name":"name"},{"type":"group","id":"u:06e119f285d9","label":"选择逻辑","body":[{"type":"select","name":"url","id":"u:31234a30d2aa","multiple":false,"source":{"url":"${runtime?`/api/ide/papi/${runtime}/api/ide/logics`:'/api/ide/logics'}","method":"get","requestAdaptor":"","adaptor":"","messages":{},"dataType":"json","sendOn":""},"labelField":"id","valueField":"id","onEvent":{"change":{"weight":0,"actions":[{"actionType":"custom","ignoreError":false,"script":"/* 自定义JS使用说明：\n  * 1.动作执行函数doAction，可以执行所有类型的动作\n  * 2.通过上下文对象context可以获取当前组件实例，例如context.props可以获取该组件相关属性\n  * 3.事件对象event，在doAction之后执行event.stopPropagation();可以阻止后续动作执行\n*/\nlet body = {};\nlet params = []\nconsole.log('method:valuechange:event.data.selectedItems')\nconsole.log(event.data.selectedItems)\nif (event.data.selectedItems && event.data.selectedItems.configJson) {\n  var configJson = JSON.parse(event.data.selectedItems.configJson);\n  console.log('method:event.data.selectedItems.configJson')\n  console.log(configJson)\n  params = configJson.params;\n  if (params) {\n    params.forEach(p => {\n      let anno = p.typeAnnotation;\n      let parValue = null;\n      if (anno.typeKind == 'reference' && anno.properties && anno.properties.length > 0) {\n        parValue = {};\n        anno.properties.forEach(prop => {\n          parValue[prop.name] = JSON.parse(prop.defaultValue);\n        })\n      }\n      body[p.name] = parValue;\n    })\n  } else {\n    body = {}\n  }\n\n}\ndoAction({\n  actionType: 'setValue',\n  componentId: 'item_body',\n  args: {\n    value: `return ` + JSON.stringify(body, null, 2)\n  }\n});\n\n\n"}]}},"searchable":true,"creatable":false,"columnRatio":11},{"type":"button","label":"设计","id":"u:4aeb67702de9","level":"light","actionType":"url","url":"/assets/logic/i/${url}/edit","blank":true,"columnRatio":1}]},{"type":"editor","label":"入参声明","name":"body","id":"item_body","language":"javascript","description":"js代码块，返回子流程的入参对象，作为子流程的_par传入"},{"type":"group","id":"u:a2175186f0de","body":[{"id":"u:3b67aa5aa5ed","type":"editor","label":"业务标识","name":"bizId","language":"javascript","description":"输入局部变量的完整引用，如_var.bizId，为空则获取上下文的bizId"},{"type":"editor","label":"返回值赋值给哪个参数？","name":"returnAccept","id":"u:05410188ca11","language":"javascript","description":"输入局部变量的完整引用，如_var.repData"}]},{"type":"radios","label":"事务传播模式","name":"tranPropagation","options":[{"label":"加入或开启(REQUIRED)","value":0},{"label":"新事务(REQUIRES_NEW)","value":3},{"label":"不传递事务(NOT_SUPPORTED)","value":4}],"id":"u:08a63ff9d5fe","value":0},{"type":"checkbox","id":"u:83836303486a","label":"异步调用","name":"async","description":"异步调用在本流程默认成功，不会等待返回结果","option":"开启异步"},{"type":"textarea","name":"memo","label":"备注","minRows":3,"maxRows":20,"id":"u:867987a2ca95"}],"onEvent":{"submitSucc":{"actions":[{"actionType":"broadcast","args":{"eventName":"formSubmited"},"data":"${event.data}"}]}},"actions":[{"type":"submit","label":"保存","primary":true,"block":true,"size":"md","id":"u:4fa4afc56a8a"}],"name":"form1","feat":"Insert","mode":"normal","dsType":"api"}],"pullRefresh":{"disabled":true},"regions":["body"],"error":{"code":0},"status":0,"id":"u:e339c263ac5e","name":"page1","sideResizor":false,"editorState":"default"}